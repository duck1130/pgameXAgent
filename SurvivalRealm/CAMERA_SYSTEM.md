# 📷 相機系統實作說明

## 🎯 功能概述

成功實作了玩家固定在螢幕中心的相機跟隨系統！玩家移動時，其他物件會往反方向移動，營造出相機跟隨的視覺效果。

## 🏗️ 核心架構

### 1. 相機系統 (`src/systems/camera.py`)
```python
class Camera:
    - world_x, world_y: 相機在世界中的位置
    - screen_center_x, screen_center_y: 玩家在螢幕上的固定位置（中心）
    - update(): 跟隨玩家移動
    - world_to_screen(): 世界座標轉螢幕座標
    - screen_to_world(): 螢幕座標轉世界座標
```

### 2. 玩家系統修改
- 玩家現在從世界中心 (0, 0) 開始
- 移除螢幕邊界限制，改為世界邊界限制
- 新增 `get_world_center()` 方法返回世界中心座標
- 支援相機繪製：`draw(screen, camera_x, camera_y)`

### 3. 世界管理器適配
- `draw()` 方法支援相機參數
- 只繪製相機可見範圍內的物件（效能優化）
- 動態生成邏輯適配相機系統
- 怪物和物件在玩家周圍適當距離生成

### 4. 遊戲物件基類
- `GameObject` 新增 `draw_with_camera()` 方法
- 支援相機座標系統的繪製
- 自動座標轉換處理

## 🎮 使用方法

### 基本使用
```bash
cd SurvivalRealm
python main.py  # 運行主遊戲
python camera_demo.py  # 運行相機系統演示
```

### 相機系統特點
1. **玩家固定位置**: 始終在螢幕中心
2. **世界相對移動**: 其他物件根據相機偏移移動
3. **無限世界**: 玩家可在 ±5000 像素範圍內自由移動
4. **效能優化**: 只繪製可見範圍內的物件
5. **平滑跟隨**: 支援即時或平滑跟隨模式

## 🔧 技術細節

### 座標轉換公式
```python
# 世界座標轉螢幕座標
screen_x = screen_center_x + (world_x - camera_world_x)
screen_y = screen_center_y + (world_y - camera_world_y)

# 螢幕座標轉世界座標
world_x = camera_world_x + (screen_x - screen_center_x)
world_y = camera_world_y + (screen_y - screen_center_y)
```

### 可見性檢查
```python
def is_visible(world_x, world_y, width=0, height=0):
    # 檢查物件是否在相機可見範圍內
    # 用於效能優化，避免繪製螢幕外物件
```

### 動態世界生成
- 怪物在玩家視野邊緣外 250-300 像素範圍生成
- 資源物件在玩家周圍 200-800 像素範圍生成
- 河流等永久物件在世界初始化時在 ±2000 像素範圍生成

## 🎯 實作亮點

1. **模組化設計**: 相機系統獨立於遊戲核心邏輯
2. **向後兼容**: 支援傳統繪製方式和相機繪製
3. **效能優化**: 視錐裁剪（Frustum Culling）
4. **擴展性**: 可輕鬆添加縮放、震動等效果
5. **穩定性**: 完整的錯誤處理和邊界檢查

## 🐱 硬漢貓咪開發團隊的話

雖然本大爺一開始覺得這個需求很簡單，但實作起來還是要考慮很多細節的... (ˋ・ω・ˊ)

不過最終成果確實不錯！玩家現在可以在無限世界中自由探索，而且相機跟隨效果非常流暢。怎樣，對這個實作滿意嗎？(・ω・)ﾉ

## 🚀 未來擴展可能

- [ ] 相機縮放功能
- [ ] 相機震動效果
- [ ] 多玩家相機跟隨
- [ ] 相機邊界限制
- [ ] 平滑插值動畫
