# 🔥 衝刺系統實作報告

**開發團隊**: 硬漢貓咪開發團隊 🐱  
**完成日期**: 2025年8月1日  
**版本**: 1.0.0  

## 📋 功能概述

實作了完整的衝刺系統，包含體力機制、疲憊狀態管理和香菇治療功能，大幅提升了遊戲的動作體驗和策略深度。

## 🚀 核心功能

### 1. 衝刺系統
- **觸發方式**: 按住 Shift + WASD 進行衝刺移動
- **速度提升**: 從 200 像素/秒 提升至 350 像素/秒 (75% 速度增益)
- **視覺效果**: 衝刺時玩家角色顯示黃色發光邊框
- **UI指示**: 狀態欄顯示 "🏃 衝刺中！" 提示

### 2. 體力消耗機制
- **衝刺消耗**: 每秒消耗 25 點體力
- **普通移動**: 每秒消耗 5 點體力
- **體力恢復**: 靜止時每秒恢復 0.3 點體力 (提升 100%)
- **衝刺門檻**: 體力低於 20 點時無法衝刺

### 3. 疲憊狀態系統
- **疲憊判定**: 體力 < 20 時進入疲憊狀態
- **行為限制**: 疲憊時無法使用衝刺功能
- **視覺提示**: UI 顯示 "😴 太累了，無法衝刺" 警告
- **恢復機制**: 需要休息恢復體力才能重新衝刺

### 4. 香菇治療系統 🍄
- **多重恢復**: 同時恢復飢餓值、生命值和體力
- **恢復數值**:
  - 飢餓值: +25 點
  - 生命值: +20 點
  - 體力值: +30 點
- **策略價值**: 成為戰鬥和探險的重要補給品

## 🔧 技術實作

### 配置文件更新 (`src/core/config.py`)
```python
PLAYER_CONFIG = {
    "speed": 200,  # 普通移動速度
    "sprint_speed": 350,  # 衝刺速度
    "sprint_energy_cost": 25,  # 衝刺體力消耗
    "sprint_threshold": 20,  # 衝刺門檻
}

SURVIVAL_STATS = {
    "energy": {"regen_rate": 0.3},  # 體力恢復速度提升
}
```

### 玩家系統更新 (`src/entities/player.py`)
- 新增 `is_sprinting` 狀態追蹤
- 重構 `handle_input()` 方法支援衝刺檢測
- 優化 `update()` 方法處理體力消耗
- 強化 `_apply_food_effects()` 實作香菇治療

### UI系統更新 (`src/ui/user_interface.py`)
- 新增衝刺狀態和疲憊警告顯示
- 優化狀態欄資訊展示

## 🎮 遊戲平衡

### 衝刺策略性
- **短距離爆發**: 適合戰鬥中快速位移
- **探險效率**: 提升地圖探索速度
- **資源管理**: 需要平衡體力使用和恢復

### 風險回報機制
- **高消耗**: 衝刺消耗大量體力
- **疲憊懲罰**: 過度使用導致無法繼續衝刺
- **香菇價值**: 成為珍貴的多功能治療道具

## 📊 性能數據

| 項目 | 數值 | 說明 |
|------|------|------|
| 基礎移動速度 | 200 px/s | 普通 WASD 移動 |
| 衝刺移動速度 | 350 px/s | Shift + WASD |
| 速度增益 | +75% | 衝刺相對提升 |
| 衝刺體力消耗 | 25/s | 每秒消耗 |
| 普通移動消耗 | 5/s | 每秒消耗 |
| 體力恢復速度 | 0.3/s | 靜止時恢復 |
| 疲憊門檻 | 20 點 | 無法衝刺的體力值 |

## 🍄 香菇治療效果

| 屬性 | 恢復量 | 百分比 |
|------|--------|--------|
| 飢餓值 | +25 | 25% |
| 生命值 | +20 | 20% |
| 體力值 | +30 | 30% |

## 🎯 使用場景

### 戰鬥情境
- **快速接近**: 衝刺接近敵人發動攻擊
- **戰術撤退**: 快速脫離危險區域
- **位移閃避**: 躲避敵人攻擊

### 探險情境
- **地圖探索**: 快速移動到目標位置
- **洞穴探險**: 在危險環境中快速移動
- **資源收集**: 提升採集效率

### 緊急情況
- **生命危急**: 使用香菇快速恢復血量
- **體力耗盡**: 香菇恢復體力繼續行動
- **多重補給**: 一次性解決多種需求

## 🔮 未來擴展

### 進階衝刺技能
- **衝刺等級系統**: 提升衝刺效率和持續時間
- **衝刺技能**: 衝刺時造成傷害或產生特殊效果
- **裝備增益**: 靴子等裝備提供衝刺加成

### 體力管理
- **體力藥水**: 專門的體力恢復道具
- **體力裝備**: 增加最大體力或恢復速度
- **技能天賦**: 減少體力消耗的技能樹

### 香菇系統擴展
- **香菇種類**: 不同效果的香菇品種
- **香菇種植**: 玩家可以種植香菇
- **香菇料理**: 組合製作更強效的治療道具

## ✅ 測試驗證

### 功能測試
- ✅ 衝刺速度提升正常
- ✅ 體力消耗機制正確
- ✅ 疲憊狀態限制有效
- ✅ 香菇治療效果符合預期
- ✅ UI 狀態顯示準確

### 平衡測試  
- ✅ 體力消耗與恢復平衡合理
- ✅ 衝刺速度提升不會破壞遊戲平衡
- ✅ 香菇治療效果適中，不會過於強大

### 性能測試
- ✅ 衝刺狀態切換流暢
- ✅ 視覺效果不影響性能
- ✅ 體力計算準確無誤

## 🏆 總結

衝刺系統的成功實作為 Survival Realm 帶來了：

1. **更流暢的移動體驗**: 75% 的速度提升讓探索更加高效
2. **策略深度增強**: 體力管理成為重要的戰術考量
3. **視覺回饋優化**: 發光效果讓衝刺狀態一目了然
4. **資源價值提升**: 香菇成為多功能的珍貴治療道具

這個系統不僅提升了遊戲的動作性，還增加了策略元素，讓玩家需要在速度和體力之間做出明智的選擇。同時，香菇的多重治療效果為緊急情況提供了有效的解決方案。

**硬漢貓咪開發團隊 🐱 - 讓每一次衝刺都充滿力量！**
